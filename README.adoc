= Bleep
:toc: left
:toclevels: 3
:icons: font
:source-highlighter: rouge

A flexible command-line interval timer with audio notifications.

image:https://img.shields.io/badge/Go-1.24+-00ADD8?style=flat-square&logo=go[Go Version]
image:https://img.shields.io/badge/Platform-Linux%20|%20macOS-brightgreen?style=flat-square[Platform]

== Features

* **Flexible Intervals** - Single or multiple rotating time intervals
* **Audio Notifications** - Built-in beep sound for each interval completion
* **Multiple Operating Modes**:
** _Default_ - Timestamped beep output only
** _Verbose_ - Live countdown display
** _Interactive_ - Manual control via keyboard
** _Watch_ - Plain text countdown output
** _JSON_ - Structured output for Waybar integration
* **Pause/Resume Control** - Signal-based control using SIGUSR1
* **Waybar Integration** - Native support for Linux desktop panels with visual states
* **Lightweight** - Single Go binary with embedded audio

== Installation

=== From Source

[source,bash]
----
git clone https://github.com/Gioni06/bleep.git
cd bleep
go build -o bleep
sudo mv bleep /usr/local/bin/
----

=== Using Go Install

[source,bash]
----
go install github.com/Gioni06/bleep@latest
----

== Quick Start

=== Basic Timer (25-minute intervals)

[source,bash]
----
bleep -m 25
----

=== Pomodoro Timer (25 min work, 5 min break)

[source,bash]
----
bleep -m 25,5
----

=== Custom Intervals (45 seconds, 15 seconds)

[source,bash]
----
bleep -s 45,15
----

=== Verbose Mode with Live Countdown

[source,bash]
----
bleep -v -m 10
----

== Command-line Options

[cols="1,3,2", options="header"]
|===
| Flag
| Description
| Example

| `-m <minutes>`
| Interval in minutes (comma-separated for multiple)
| `-m 25,5`

| `-s <seconds>`
| Interval in seconds (comma-separated for multiple)
| `-s 30,10`

| `-v`
| Verbose mode - shows countdown and status
| `-v -m 10`

| `-i`
| Interactive mode - keyboard control enabled
| `-i -m 25`

| `-json`
| JSON output for Waybar integration
| `-json -m 25`

| `-watch`
| Plain text countdown output
| `-watch -m 5`

| `-paused`
| Start in paused state (toggle with SIGUSR1)
| `-paused -m 25`
|===

== Interactive Mode

When running with the `-i` flag, you can control Bleep with keyboard input:

* **Enter** - Trigger immediate beep and reset timer
* **Backspace** - Reset timer silently (no beep)

[source,bash]
----
bleep -i -v -m 10
----

== Waybar Integration

Bleep includes native support for https://github.com/Alexays/Waybar[Waybar].

See the `waybar-example/` directory for a complete setup including:

* `config.jsonc` - Waybar module configuration
* `style.css` - CSS styling for counting/paused/beep states
* `scripts/interval-wrapper.sh` - Wrapper with persistent configuration
* `scripts/interval-config.sh` - Interactive terminal UI to change intervals

=== Quick Setup

Copy the example files to your Waybar config:

[source,bash]
----
cp waybar-example/scripts/* ~/.config/waybar/scripts/
chmod +x ~/.config/waybar/scripts/interval-*.sh
----

Add to your `~/.config/waybar/config`:

[source,json]
----
{
    "custom/interval": {
        "exec": "~/.config/waybar/scripts/interval-wrapper.sh",
        "return-type": "json",
        "on-click": "pkill -SIGUSR1 -f 'bleep.*-json'",
        "format": "{}",
        "tooltip": true
    }
}
----

Add to your `~/.config/waybar/style.css`:

[source,css]
----
#custom-interval.counting { color: #a6e3a1; }
#custom-interval.paused { color: #f9e2af; }
#custom-interval.beep { color: #f38ba8; font-weight: bold; }
----

=== Controls

* **Left-click** - Toggle pause/resume
* **Right-click** - Open configuration UI (requires terminal emulator)

== Output Formats

=== Default Mode

Timestamped output when interval completes:

----
BEEP 2024-12-13T15:30:00+01:00
----

=== Verbose Mode (`-v`)

Live countdown display:

----
Next beep in: 24m 35s
----

On beep:

----
[15:30:00] Beep #1 (automatic)
----

=== JSON Mode (`-json`)

Structured output for Waybar:

[source,json]
----
{
    "text": "24m 35s",
    "tooltip": "25m 0s",
    "class": "counting",
    "remaining": 1475
}
----

With multiple intervals:

[source,json]
----
{
    "text": "4m 30s",
    "tooltip": "Interval 2/3: 5m 0s",
    "class": "counting",
    "remaining": 270
}
----

Classes: `counting`, `paused`, `beep`

=== Watch Mode (`-watch`)

Plain text countdown:

----
24m 35s
----

== Advanced Usage

=== Pause and Resume

Start paused and control via signals:

[source,bash]
----
# Start paused
bleep -paused -m 25 &

# Toggle pause/resume
pkill -SIGUSR1 -f 'bleep.*-paused'
----

=== Multiple Intervals

Rotate through different intervals automatically:

[source,bash]
----
# 50min focus, 10min break, 50min focus, 30min long break
bleep -m 50,10,50,30
----

=== Combine Minutes and Seconds

When using both `-m` and `-s` with comma-separated values, the shorter list is padded with its last value:

[source,bash]
----
# Interval 1: 1m 30s, Interval 2: 1m 45s
bleep -m 1 -s 30,45
----

== Building from Source

=== Prerequisites

* Go 1.24 or higher
* Git

=== Build Steps

[source,bash]
----
git clone https://github.com/Gioni06/bleep.git
cd bleep
go build -o bleep
sudo install -m 755 bleep /usr/local/bin/
----
